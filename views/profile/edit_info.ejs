<% include ../partials/header %>

<div class="container">
    <h1 class="center">Edit Profile</h1>
    <div id="form-register">
        <form action="/profile/<%= currUser._id %>?_method=PUT" method="POST">
            <div class="row">
                <div class="form-group col-md-5">
                    <label for="inputFirstName">First Name</label>
                    <input type="text" class="form-control" name="user[first_name]" id="inputFirstName" value="<%= currUser.first_name %>">
                </div>
                <div class="form-group col-md-5">
                    <label for="inputLastName">Last Name</label>
                    <input type="text" class="form-control" name="user[last_name]" id="inputLastName" value="<%= currUser.last_name %>">
                </div>
                <div class="form-group col-md-2">
                    <label for="inputAge">Age</label>
                    <input type="number" class="form-control" name="user[age]" id="inputAge" min="0" max="100" value="<%= currUser.age %>">
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-6">
                    <label for="inputEmail">Email</label>
                    <input type="email" class="form-control" name="user[email]" id="inputEmail" value="<%= currUser.email %>">
                </div>
                <div class="form-group col-md-6">
                    <label for="inputCountry">Country</label>
                    <input type="text" class="form-control" name="user[country]" id="inputCountry" value="<%= currUser.country %>">
                </div>
            </div>
            <div class="row">
                <div class="form-group col-md-12">
                    <label for="inputAbout">About me</label>
                    <textarea class="form-control" maxlength="1000" id="inputAbout" name="user[about]" rows="4" cols="50"></textarea>
                    <div class="align-right">
                        <p>* <span class="limit-characters">1000</span> characters left</p>
                    </div>
                </div>
            </div>
            <div class="row">
                <input type="submit" class="btn btn-default btn-submit" value="Edit">
            </div>
        </form>
    </div>
</div>

<script type="text/javascript" src="/js/bootstrap.min.js"></script>
<script>
    document.getElementById("inputAbout").value = "<%= currUser.about %>";
    
    // Update how many characters the user can use
    document.getElementsByClassName("comment-textarea")[0].addEventListener("keyup", function() {
        document.getElementsByClassName("limit-characters")[0].textContent = 1000 - document.getElementsByClassName("comment-textarea")[0].value.length; 
    });
</script>

<% include ../partials/footer %>